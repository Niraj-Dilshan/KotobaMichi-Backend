# ------------------------------
# PostgreSQL Database Settings
# These are used by the 'db' service.
# ------------------------------
POSTGRES_DB=kotobamichi
POSTGRES_USER=postgres
POSTGRES_PASSWORD=your_strong_and_secret_password
DB_PORT=5432

# ------------------------------
# Application Configuration
# These are used by the 'app' and 'migration' services.
# ------------------------------

# This full connection string is required by the backend app and migration script.
# IMPORTANT: The hostname is 'db', which is the service name of the database
# container within the Docker network. Do not change it to 'localhost'.
DATABASE_URL=postgresql://postgres:your_strong_and_secret_password@db:5432/kotobamichi?schema=public

# The port your backend application will run on.
PORT=3000

# Node environment (development | production)
# Set to 'production' in production containers / CI
NODE_ENV=development

# ------------------------------
# Security & Authentication
# ------------------------------

# A long, random, and secret string for signing JSON Web Tokens (JWT).
JWT_SECRET=your_super_secret_jwt_key_that_is_very_long
JWT_EXPIRES_IN=7d

# ------------------------------
# Initial Admin User
# Credentials for the default admin account created by the application.
# ------------------------------
ADMIN_EMAIL=admin@example.com
ADMIN_PASSWORD=a_secure_admin_password

# ------------------------------
# Auth Cookies & CORS
# ------------------------------

# Whether to mark cookies as Secure (sent only over HTTPS). Use true in production; false in local HTTP.
COOKIE_SECURE=false

# SameSite policy for cookies: none | lax | strict
# - Use 'none' for cross-site frontends (requires HTTPS and COOKIE_SECURE=true)
# - Use 'lax' for same-site local development
COOKIE_SAMESITE=lax

# Comma-separated list of allowed origins for CORS
# Example: https://app.example.com,https://admin.example.com
CORS_ORIGIN=http://localhost:5173

# Access token lifetime (short)
ACCESS_TOKEN_EXPIRES_IN=15m

# Refresh token lifetime (long)
REFRESH_TOKEN_EXPIRES_IN=7d

# Optional: secret used by cookie-parser to sign cookies (not mandatory for HttpOnly auth cookies)
COOKIE_SECRET=your_super_secret_cookie_key_that_is_very_long

# ------------------------------
# Email Verification
# ------------------------------
APP_URL=http://localhost:3000
EMAIL_VERIFICATION_EXPIRES_IN=1d
PASSWORD_RESET_EXPIRES_IN=1h

# Rate limits for email flows (defaults used by the app when unset)
# Time (seconds) a user must wait between requesting another verification email
EMAIL_VERIFICATION_COOLDOWN_SECONDS=60
# Maximum verification emails a user can request in a 24h window
EMAIL_VERIFICATION_DAILY_LIMIT=10

# Time (seconds) a user must wait between requesting another password reset
PASSWORD_RESET_COOLDOWN_SECONDS=60
# Maximum password reset emails a user can request in a 24h window
PASSWORD_RESET_DAILY_LIMIT=10

# SMTP
SMTP_HOST=smtp.example.com
SMTP_PORT=587
SMTP_SECURE=false
SMTP_USER=your-user
SMTP_PASS=your-pass
SMTP_FROM="KotobaMichi <no-reply@example.com>"